{% extends 'base.html.twig' %}

{% block title %} Détail de la feuille de route {% endblock %}

{% block body %}

    <section class="container">
        <p class="fil-ariane">
            <span><a href="{{ path('app_feuille_route') }}">Toutes les feuille de routes</a></span> >
            {{ feuilleRoute.getDates() }}
        </p>
        <div class="feuille-route-titre flex justify-between wrap">
            <div>
                <h1><span>Semaine {{ feuilleRoute.getSemaine() }}</span> > Feuille de route de <a
                            href=" {{ path('show_eleve', {'id': feuilleRoute.eleve.id}) }}">{{ feuilleRoute.eleve }}</a>
                </h1>
            </div>
            <nav>
                <a class="button btn-small btn-update" href="{{ path('update_feuille_route', {id: feuilleRoute.id}) }}"><i></i>Modifier</a>
                <a class="button btn-small btn-delete" href="{{ path('delete_feuille_route', {id: feuilleRoute.id}) }}"><i></i>Supprimer</a>
            </nav>

        </div>
        <article>
            {# gestion des template d'image #}
            {% set i = 0 %}
            {% for activite in feuilleRoute.getActivites() %}
                {# Votre code pour chaque activité ici #}
                {% set i = i + 1 %}
                {% set i = (i + 1) % 3 %}
            {% endfor %}
            {# activités #}
            {% for activite in feuilleRoute.getActivites() %}
            <div>
                <h2>Détail de <a href="{{ path('show_activite', {'id': activite.id}) }}">{{ activite.titre }}</a></h2>
                {# TODO: GERER LES IMAGES #}
                <div class="show-activite-box">
                    <div class=" show-activite-imgbox">

                        {% if activite.images is empty %}
                            <figure class="show-activite-figure">
                                <img src="{{ asset('assets/img/activite/1.png') }}" width="450" height="300"
                                     alt="img logique"/>
                            </figure>
                        {% else %}
                            <figure class="show-activite-figure">
                                <img src="{{ asset('assets/img/uploads/activite/'~ activite.images[i].nom) }}"
                                     alt="img logique"/>
                            </figure>
                        {% endif %}
                    </div>
                    <div class="show-activite-consignes">
                        <h3 class="filet-titre">Consignes</h3>
                        <ul>
                            {% for consigne in activite.groupeconsignes.consignes %}
                                <li>{{ consigne.libelle }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="show-activite-competences">
                        <h3>Compétences</h3>
                        <div>
                            {% for competences in activite.groupescompetences %}
                                <ul>
                                    <li><h3>{{ competences.titre }}</h3></li>
                                    {% for competence in competences.competences %}
                                        <li>{{ competence.libelle }}</li>
                                    {% endfor %}
                                </ul>
                            {% endfor %}
                        </div>

                    </div>
                </div>
                {% endfor %}
            </div>
        </article>
    </section>

{% endblock %}